<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="theme-color" content="#f8f5ec"><meta name="msapplication-navbutton-color" content="#f8f5ec"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec"><meta name="description" content="转义序列Escape Sequences及Linux echo命令多种颜色显示"><meta name="keywords" content="转义, 颜色, color, 布丁酱油"><link rel="alternate" href="/atom.xml" title="布丁酱油"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.6.0"><link rel="canonical" href="http://blog.yehao326.cn/转义序列Escape-Sequences及Linux-echo命令多种颜色显示/"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0"><link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css"><script id="baidu_analytics">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?a53c2ce7480b98db536000319d85c970";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script id="baidu_push">!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script><script id="leancloud">AV.init({appId:"9mMFTWRaFdbg0MuKVjYeIyty-gzGzoHsz",appKey:"lBrA617OeTcgzkX2SjRQWSb0"})</script><title>转义序列Escape Sequences及Linux echo命令多种颜色显示 - 布丁酱油</title></head><body><div id="mobile-navbar" class="mobile-navbar"><div class="mobile-header-logo"><a href="/." class="logo">布丁酱油</a></div><div class="mobile-navbar-icon"><span></span> <span></span> <span></span></div></div><nav id="mobile-menu" class="mobile-menu slideout-menu"><ul class="mobile-menu-list"><a href="/"><li class="mobile-menu-item">首页</li></a><a href="/archives/"><li class="mobile-menu-item">归档</li></a><a href="/tags"><li class="mobile-menu-item">标签</li></a><a href="/categories"><li class="mobile-menu-item">分类</li></a><a href="/about"><li class="mobile-menu-item">关于</li></a></ul></nav><div class="container" id="mobile-panel"><header id="header" class="header"><div class="logo-wrapper"><a href="/." class="logo">布丁酱油</a></div><nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item"><a class="menu-item-link" href="/">首页</a></li><li class="menu-item"><a class="menu-item-link" href="/archives/">归档</a></li><li class="menu-item"><a class="menu-item-link" href="/tags">标签</a></li><li class="menu-item"><a class="menu-item-link" href="/categories">分类</a></li><li class="menu-item"><a class="menu-item-link" href="/about">关于</a></li></ul></nav></header><main id="main" class="main"><div class="content-wrapper"><div id="content" class="content"><article class="post"><header class="post-header"><h1 class="post-title">转义序列Escape Sequences及Linux echo命令多种颜色显示</h1><div class="post-meta"><span class="post-time">2018-03-29</span><div class="post-visits" data-url="/转义序列Escape-Sequences及Linux-echo命令多种颜色显示/" data-title="转义序列Escape Sequences及Linux echo命令多种颜色显示">阅读次数</div></div></header><div class="post-content"><p>翻阅了很多中文的博文，多数文章是讲echo颜色的用法，本人实在不爱死背，追本溯源，真正看看转义序列是什么？</p><p>转义字符，学习过C语言的童鞋都知道，著名的printf函数中支持一些控制字符输出，例如\t 、\n等。我们通常称它们为转义字符。</p><p><strong>一、转义序列是什么？</strong></p><p>1、维基百科（译者怕翻译偏差大，保留原文）<br>In computing, ANSI escape code (or escape sequences) is the method of in-band signaling to control formatting, color, and other output options on video text terminals.<br>在计算机界，ANSI转义编码或者转义序列是带内信号（元数据和控制信号，译者注）控制视频文字终端的格式、颜色、其他输出选项的一种方法。<br>To encode this formatting information, it embeds certain sequences of bytes into the text, which have to be interpreted specially, not as codes of characters.<br>为了编码这些格式信息，它把某种字节的序列嵌入到文本中，该序列必须特别的解释，且不应该作为字符的本义。</p><p>Although hardware text terminals have become increasingly rare in the 21st century, the relevance of this standard persists because most terminal emulators interpret at least some of the ANSI escape sequences in the output text.<br>尽管硬件字符终端在21世纪已经变得很愈来愈少见，这种标准依然具有实用价值，是因为大多数终端仿真器至少还能解释在输出文本中的一些ANSI转义序列。<br>One notable exception is the win32 console component of Microsoft Windows.<br>但微软的win32控制台组件就是一个明显的例外。</p><p>2、微软的解释<br>包含反斜杠 () 的字符组合后跟字母或用数字的组合称为 “转义序列”。若要显示换行符、单引号或某些其他字符常数的，必须使用转义序列。 因此转义序列被视为单个字符是有效的作为字符常数。</p><p><strong>二、转义序列定义</strong><br>Sequence elements<br>序列元素<br>Escape sequences start with the character ESC (ASCII decimal 27/hex 0x1B/octal 033).<br>转义序列使用ESC控制字符开始。<br>For two character sequences, the second character is in the range ASCII 64 to 95 (@ to <em>).<br>对于2个字符序列，第二个字符是ASCII的64到95。（@到</em>，还有所有大写英文字母和[]\^）<br>However, most of the sequences are more than two characters, and start with the characters ESC and [ (left bracket).<br>然而，序列中大多数是超过2个字符的，并以ESC控制字符和左中括号开始。<br>This sequence is called CSI for Control Sequence Introducer (or Control Sequence Initiator). The final character of these sequences is in the range ASCII 64 to 126 (@ to ~).<br>序列被称作CSI，即控制序列引导器或者控制序列启动器的简称。这个序列的最后一个字符是在ASCII范围64到126。<br>There is a single-character CSI (155/0x9B/0233) as well.<br>也还有一个单字符的CSI (155/0x9B/0233)。</p><p>The ESC+[ two-character sequence is more often used than the single-character alternative, for details see C0 and C1 control codes.<br>ESC[，这两个字符序列比单个字符形式用的更多，细节参看C0和C1控制编码。<br>Only the two-character sequence is recognized by devices that support just ASCII (7-bit bytes) or devices that support 8-bit bytes but use the 0x80–0x9F control character range for other purposes.<br>那些 仅支持ASCII（7位字节），或者支持8位字节但出于其他用途而使用0x80-0x9F控制字符区域的设备 仅能识别 2字符的序列。<br>On terminals that use UTF-8 encoding, both forms take 2 bytes (CSI in UTF-8 is 0xC2, 0x9B) but the ESC+[ sequence is clearer.<br>使用UTF-8编码的终端上，两种形式都使用2字节（CSI in UTF-8 is 0xC2, 0x9B），但ESC[序列更加明了。</p><p>Though some encodings use multiple bytes per character, the following discussion is restricted to ASCII characters, and so assumes each character is directly represented by a single byte.<br>虽然一些编码使用多字节字符，下面的讨论仅针对ASCII字符，因此假定每一个字符由单个字节表示。</p><p>30–37 Set text color (foreground) 30 + x, where x is from the color table below<br>38 Set xterm-256 text color (foreground)[dubious – discuss] next arguments are 5;x where x is color index (0..255)<br>39 Default text color (foreground) implementation defined (according to standard)<br>40–47 Set background color 40 + x, where x is from the color table below<br>48 Set xterm-256 background color next arguments are 5;x where x is color index (0..255)<br>49 Default background color implementation defined (according to standard)</p><p><strong>三、颜色控制序列</strong><br>Colors<br>Text colors (and SGR parameters in general) are manipulated using CSI n1 [;n2 [; …]] m sequences, where each n1, n2, … is an SGR parameter as shown above.<br>文本颜色（和SGR (Select Graphic Rendition)参数）使用CSI n1 [;n2 [; …]] m 序列来处理，如上所示，序列中每一个n1, n2, …就是一个SGR参数。<br>Thus, for instance, you use codes 30+i to specify foreground color, 40+i to specify background color, where i is the number in the desired color’s column header in the table below.<br>因此，例如，你使用30+i表示前景色，40+i表示背景色， i 就是下表中的颜色数字。</p><table><thead><tr><th>Intensity</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th></tr></thead><tbody><tr><td>Normal</td><td>Black</td><td>Red</td><td>Green</td><td>Yellow</td><td>Blue</td><td>Magenta</td><td>Cyan</td><td>White</td></tr><tr><td>Bright</td><td>Black</td><td>Red</td><td>Green</td><td>Yellow</td><td>Blue</td><td>Magenta</td><td>Cyan</td><td>White</td></tr></tbody></table><p><img src="/image/colors.png" alt="img"></p><p>The following examples can be used with the printf utility, where \x1b[ implements the CSI: To switch the foreground color to black, use \x1b[30m; to switch to red, use \x1b[31m; utilizing the “bold” parameter, gray would be \x1b[30;1m; to get bold red, use \x1b[31;1m. To reset colors to their defaults, use \x1b[39;49m (or reset all attributes with \x1b[0m).<br>下面的例子使用printf功能，在其中 \x1b[ 实现CSI：<br>转换前景色为黑色，使用\x1b[30m<br>转换为红色，使用\x1b[31m<br>如果使用加粗参数，灰色写作\x1b[30;1m<br>获取红色加粗，使用\x1b[31;1m<br>重置颜色为缺省值，使用\x1b[39;49m （或者使用 \x1b[0m 重置所有属性）</p><p>\033[0m 重置为正常<br>\033[1m 设置高亮度或加粗<br>\033[4m 下划线<br>\033[5m 闪烁<br>\033[7m 反显<br>\033[8m 消隐<br>\033[30m – /33[37m 设置前景色<br>\033[40m – /33[47m 设置背景色</p><p>控制符ESC的常用表示方法\e、\x1b(\x1B)、\033都可以<br>\e 指代Escape，对应八进制\033，对应十六进制\x1b</p><p><strong>四、举例：</strong><br>使用CentOS 6 的echo命令<br>1、$ echo -e “\033[1;31;42mMine is red \e[0m”<br>高亮绿底红字<br>2、$ echo -e “\033[4mm is red”<br>下划线显示，但没有关闭，下划线一直存在，直到遇到第3个示例<br>3、$ echo -e “\x1b[0m”<br>关闭所有属性，恢复正常</p></div><div class="post-copyright"><p class="copyright-item"><span>原文作者: </span><a href="http://blog.yehao326.cn">Storv</a></p><p class="copyright-item"><span>原文链接: </span><a href="http://blog.yehao326.cn/转义序列Escape-Sequences及Linux-echo命令多种颜色显示/">http://blog.yehao326.cn/转义序列Escape-Sequences及Linux-echo命令多种颜色显示/</a></p><p class="copyright-item"><span>许可协议: </span><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a></p></div><div class="post-reward"><input type="checkbox" name="reward" id="reward" hidden> <label class="reward-button" for="reward">坚持原创技术分享，您的支持将鼓励我继续创作！</label><div class="qr-code"><label class="qr-code-image" for="reward"><img class="image" src="/image/reward/wechat.png" title="wechat"></label> <label class="qr-code-image" for="reward"><img class="image" src="/image/reward/alipay.png" title="alipay"></label></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/转义/">转义</a> <a href="/tags/颜色/">颜色</a> <a href="/tags/color/">color</a></div><nav class="post-nav"><a class="next" href="/湘北/"><span class="next-text nav-default">湘北</span> <span class="prev-text nav-mobile">下一篇</span> <i class="iconfont icon-right"></i></a></nav></footer></article></div><div class="comments" id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div></main><footer id="footer" class="footer"><div class="social-links"><a href="mailto:storv2580@163.com" class="iconfont icon-email" title="email"></a> <a href="https://twitter.com/Mano_Ye" class="iconfont icon-twitter" title="twitter"></a> <a href="https://github.com/storv" class="iconfont icon-github" title="github"></a> <a href="https://weibo.com/storv/home" class="iconfont icon-weibo" title="weibo"></a></div><div class="copyright"><span class="copyright-year">&copy; 2018 <span class="heart"><i class="iconfont icon-heart"></i> </span><span class="author">Storv</span></span></div></footer><div class="back-to-top" id="back-to-top"><i class="iconfont icon-up"></i></div><script type="text/javascript">var disqus_config=function(){this.page.url="http://blog.yehao326.cn/转义序列Escape-Sequences及Linux-echo命令多种颜色显示/",this.page.identifier="转义序列Escape-Sequences及Linux-echo命令多种颜色显示/",this.page.title="转义序列Escape Sequences及Linux echo命令多种颜色显示"};!function(){var e=document,t=e.createElement("script");t.src="//blog-storv-cn.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}()</script><div id="SOHUCS"></div><script type="text/javascript">!function(){var t,e,n,a,c="cysKVq9Sk",o="9bef8f5d53c276c32de8c9038b77b71e";if((window.innerWidth||document.documentElement.clientWidth)<960)window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="http://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id='+c+"&conf="+o+'"><\/script>');else{t="http://changyan.sohu.com/upload/changyan.js",e=function(){window.changyan.api.config({appid:c,conf:o})},n=document.getElementsByTagName("head")[0]||document.head||document.documentElement,(a=document.createElement("script")).setAttribute("type","text/javascript"),a.setAttribute("charset","UTF-8"),a.setAttribute("src",t),"function"==typeof e&&(window.attachEvent?a.onreadystatechange=function(){var t=a.readyState;"loaded"!==t&&"complete"!==t||(a.onreadystatechange=null,e())}:a.onload=e),n.appendChild(a)}}()</script></div><script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script><script type="text/javascript" src="/lib/slideout/slideout.js"></script><script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script><script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script></body></html>